# This file is part of the Fuzion language implementation.
#
# The Fuzion language implementation is free software: you can redistribute it
# and/or modify it under the terms of the GNU General Public License as published
# by the Free Software Foundation, version 3 of the License.
#
# The Fuzion language implementation is distributed in the hope that it will be
# useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
# License for more details.
#
# You should have received a copy of the GNU General Public License along with The
# Fuzion language implementation.  If not, see <https://www.gnu.org/licenses/>.


# -----------------------------------------------------------------------
#
#  Tokiwa Software GmbH, Germany
#
#  Source code of Fuzion test testOnesCount
#
#  Author: Fridtjof Siebert (siebert@tokiwa.software)
#
# -----------------------------------------------------------------------

# A simple test for integer ones_count, highest_one_bit and trailing_zeros
#
# The test should be run and its output should be compared to the expected
# output.
#
testOnesCount is

  show(x u64) =>
    yak ((x.bin 64) + ": " + x.ones_count+" "+x.cast_to_i64.ones_count+" "+x.low32bits.ones_count+" "+x.low32bits.cast_to_i32.ones_count + " ")
    yak ($x.low16bits.ones_count+" "+x.low16bits.cast_to_i16.ones_count+" "+x.low8bits.ones_count+" "+x.low8bits.cast_to_i8.ones_count + " ")
    yak ($x.highest_one_bit+" "+x.cast_to_i64.highest_one_bit+" "+x.low32bits.highest_one_bit+" "+x.low32bits.cast_to_i32.highest_one_bit + " ")
    yak ($x.low16bits.highest_one_bit+" "+x.low16bits.cast_to_i16.highest_one_bit+" "+x.low8bits.highest_one_bit+" "+x.low8bits.cast_to_i8.highest_one_bit + " ")
    yak ($x.trailing_zeros+" "+x.cast_to_i64.trailing_zeros+" "+x.low32bits.trailing_zeros+" "+x.low32bits.cast_to_i32.trailing_zeros + " ")
    yak ($x.low16bits.trailing_zeros+" "+x.low16bits.cast_to_i16.trailing_zeros+" "+x.low8bits.trailing_zeros+" "+x.low8bits.cast_to_i8.trailing_zeros + ".")
    say ""

  show 0
  show 1
  show 2
  show 3
  show 4
  show (-1).cast_to_u32.as_u64
  show (-2).cast_to_u32.as_u64
  show (-1).as_i64.cast_to_u64
  show (-2).as_i64.cast_to_u64
  show 0x_ffffffff_ffffffff
  show 0x_55555555_55555555
  show 0x_aaaaaaaa_aaaaaaaa
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000001
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000011
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00000000_00001111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00000000_00011111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00000000_00111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00000000_01111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00000000_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00000001_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00000011_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00000111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00001111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00011111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_00111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_01111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000000_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000001_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000011_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00000111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00001111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00011111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_00111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_01111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000000_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000001_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000011_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00000111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00001111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00011111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_00111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_01111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000000_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000001_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000011_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00000111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00001111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00011111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_00111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_01111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000000_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000001_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000011_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00000111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00001111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00011111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_00111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_01111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000000_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000001_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000011_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00000111_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00001111_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00011111_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_00111111_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_01111111_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000000_11111111_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000001_11111111_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000011_11111111_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00000111_11111111_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00001111_11111111_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00011111_11111111_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_00111111_11111111_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_01111111_11111111_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b_11111111_11111111_11111111_11111111_11111111_11111111_11111111_11111111
  show 0b0000000000000000000000000000000000000000000000000000000000000000
  show 0b1000000000000000000000000000000000000000000000000000000000000000
  show 0b1100000000000000000000000000000000000000000000000000000000000000
  show 0b1110000000000000000000000000000000000000000000000000000000000000
  show 0b1111000000000000000000000000000000000000000000000000000000000000
  show 0b1111100000000000000000000000000000000000000000000000000000000000
  show 0b1111110000000000000000000000000000000000000000000000000000000000
  show 0b1111111000000000000000000000000000000000000000000000000000000000
  show 0b1111111100000000000000000000000000000000000000000000000000000000
  show 0b1111111110000000000000000000000000000000000000000000000000000000
  show 0b1111111111000000000000000000000000000000000000000000000000000000
  show 0b1111111111100000000000000000000000000000000000000000000000000000
  show 0b1111111111110000000000000000000000000000000000000000000000000000
  show 0b1111111111111000000000000000000000000000000000000000000000000000
  show 0b1111111111111100000000000000000000000000000000000000000000000000
  show 0b1111111111111110000000000000000000000000000000000000000000000000
  show 0b1111111111111111000000000000000000000000000000000000000000000000
  show 0b1111111111111111100000000000000000000000000000000000000000000000
  show 0b1111111111111111110000000000000000000000000000000000000000000000
  show 0b1111111111111111111000000000000000000000000000000000000000000000
  show 0b1111111111111111111100000000000000000000000000000000000000000000
  show 0b1111111111111111111110000000000000000000000000000000000000000000
  show 0b1111111111111111111111000000000000000000000000000000000000000000
  show 0b1111111111111111111111100000000000000000000000000000000000000000
  show 0b1111111111111111111111110000000000000000000000000000000000000000
  show 0b1111111111111111111111111000000000000000000000000000000000000000
  show 0b1111111111111111111111111100000000000000000000000000000000000000
  show 0b1111111111111111111111111110000000000000000000000000000000000000
  show 0b1111111111111111111111111111000000000000000000000000000000000000
  show 0b1111111111111111111111111111100000000000000000000000000000000000
  show 0b1111111111111111111111111111110000000000000000000000000000000000
  show 0b1111111111111111111111111111111000000000000000000000000000000000
  show 0b1111111111111111111111111111111100000000000000000000000000000000
  show 0b1111111111111111111111111111111100000000000000000000000000000000
  show 0b1111111111111111111111111111111110000000000000000000000000000000
  show 0b1111111111111111111111111111111111000000000000000000000000000000
  show 0b1111111111111111111111111111111111100000000000000000000000000000
  show 0b1111111111111111111111111111111111110000000000000000000000000000
  show 0b1111111111111111111111111111111111111000000000000000000000000000
  show 0b1111111111111111111111111111111111111100000000000000000000000000
  show 0b1111111111111111111111111111111111111110000000000000000000000000
  show 0b1111111111111111111111111111111111111111000000000000000000000000
  show 0b1111111111111111111111111111111111111111100000000000000000000000
  show 0b1111111111111111111111111111111111111111110000000000000000000000
  show 0b1111111111111111111111111111111111111111111000000000000000000000
  show 0b1111111111111111111111111111111111111111111100000000000000000000
  show 0b1111111111111111111111111111111111111111111110000000000000000000
  show 0b1111111111111111111111111111111111111111111111000000000000000000
  show 0b1111111111111111111111111111111111111111111111100000000000000000
  show 0b1111111111111111111111111111111111111111111111110000000000000000
  show 0b1111111111111111111111111111111111111111111111111000000000000000
  show 0b1111111111111111111111111111111111111111111111111100000000000000
  show 0b1111111111111111111111111111111111111111111111111110000000000000
  show 0b1111111111111111111111111111111111111111111111111111000000000000
  show 0b1111111111111111111111111111111111111111111111111111100000000000
  show 0b1111111111111111111111111111111111111111111111111111110000000000
  show 0b1111111111111111111111111111111111111111111111111111111000000000
  show 0b1111111111111111111111111111111111111111111111111111111100000000
  show 0b1111111111111111111111111111111111111111111111111111111110000000
  show 0b1111111111111111111111111111111111111111111111111111111111000000
  show 0b1111111111111111111111111111111111111111111111111111111111100000
  show 0b1111111111111111111111111111111111111111111111111111111111110000
  show 0b1111111111111111111111111111111111111111111111111111111111111000
  show 0b1111111111111111111111111111111111111111111111111111111111111100
  show 0b1111111111111111111111111111111111111111111111111111111111111110
  show 0b1111111111111111111111111111111111111111111111111111111111111111
  show 0b0000000000000000000000000000000000000000000000000000000000000000
  show 0b1000000000000000000000000000000000000000000000000000000000000000
  show 0b1100000000000000000000000000000000000000000000000000000000000000
  show 0b1110000000000000000000000000000000000000000000000000000000000000
  show 0b1111000000000000000000000000000000000000000000000000000000000000
  show 0b1111100000000000000000000000000000000000000000000000000000000000
  show 0b1111110000000000000000000000000000000000000000000000000000000000
  show 0b1111111000000000000000000000000000000000000000000000000000000000
  show 0b1111111100000000000000000000000000000000000000000000000000000000
  show 0b1111111110000000000000000000000000000000000000000000000000000000
  show 0b1111111111000000000000000000000000000000000000000000000000000000
  show 0b1111111111100000000000000000000000000000000000000000000000000000
  show 0b1111111111110000000000000000000000000000000000000000000000000000
  show 0b1111111111111000000000000000000000000000000000000000000000000000
  show 0b1111111111111100000000000000000000000000000000000000000000000000
  show 0b1111111111111110000000000000000000000000000000000000000000000000
  show 0b1111111111111111000000000000000000000000000000000000000000000000
  show 0b0111111111111111100000000000000000000000000000000000000000000000
  show 0b0011111111111111110000000000000000000000000000000000000000000000
  show 0b0001111111111111111000000000000000000000000000000000000000000000
  show 0b0000111111111111111100000000000000000000000000000000000000000000
  show 0b0000011111111111111110000000000000000000000000000000000000000000
  show 0b0000001111111111111111000000000000000000000000000000000000000000
  show 0b0000000111111111111111100000000000000000000000000000000000000000
  show 0b0000000011111111111111110000000000000000000000000000000000000000
  show 0b0000000001111111111111111000000000000000000000000000000000000000
  show 0b0000000000111111111111111100000000000000000000000000000000000000
  show 0b0000000000011111111111111110000000000000000000000000000000000000
  show 0b0000000000001111111111111111000000000000000000000000000000000000
  show 0b0000000000000111111111111111100000000000000000000000000000000000
  show 0b0000000000000011111111111111110000000000000000000000000000000000
  show 0b0000000000000001111111111111111000000000000000000000000000000000
  show 0b0000000000000000111111111111111100000000000000000000000000000000
  show 0b0000000000000000011111111111111110000000000000000000000000000000
  show 0b0000000000000000001111111111111111000000000000000000000000000000
  show 0b0000000000000000000111111111111111100000000000000000000000000000
  show 0b0000000000000000000011111111111111110000000000000000000000000000
  show 0b0000000000000000000001111111111111111000000000000000000000000000
  show 0b0000000000000000000000111111111111111100000000000000000000000000
  show 0b0000000000000000000000011111111111111110000000000000000000000000
  show 0b0000000000000000000000001111111111111111000000000000000000000000
  show 0b0000000000000000000000000111111111111111100000000000000000000000
  show 0b0000000000000000000000000011111111111111110000000000000000000000
  show 0b0000000000000000000000000001111111111111111000000000000000000000
  show 0b0000000000000000000000000000111111111111111100000000000000000000
  show 0b0000000000000000000000000000011111111111111110000000000000000000
  show 0b0000000000000000000000000000001111111111111111000000000000000000
  show 0b0000000000000000000000000000000111111111111111100000000000000000
  show 0b0000000000000000000000000000000011111111111111110000000000000000
  show 0b0000000000000000000000000000000001111111111111111000000000000000
  show 0b0000000000000000000000000000000000011111111111111110000000000000
  show 0b0000000000000000000000000000000000001111111111111111000000000000
  show 0b0000000000000000000000000000000000000111111111111111100000000000
  show 0b0000000000000000000000000000000000000011111111111111110000000000
  show 0b0000000000000000000000000000000000000001111111111111111000000000
  show 0b0000000000000000000000000000000000000000111111111111111100000000
  show 0b0000000000000000000000000000000000000000011111111111111110000000
  show 0b0000000000000000000000000000000000000000001111111111111111000000
  show 0b0000000000000000000000000000000000000000000111111111111111100000
  show 0b0000000000000000000000000000000000000000000011111111111111110000
  show 0b0000000000000000000000000000000000000000000001111111111111111000
  show 0b0000000000000000000000000000000000000000000000111111111111111100
  show 0b0000000000000000000000000000000000000000000000011111111111111110
  show 0b0000000000000000000000000000000000000000000000001111111111111111
  show 0b0000000000000000000000000000000000000000000000000111111111111111
  show 0b0000000000000000000000000000000000000000000000000011111111111111
  show 0b0000000000000000000000000000000000000000000000000001111111111111
  show 0b0000000000000000000000000000000000000000000000000000111111111111
  show 0b0000000000000000000000000000000000000000000000000000011111111111
  show 0b0000000000000000000000000000000000000000000000000000001111111111
  show 0b0000000000000000000000000000000000000000000000000000000111111111
  show 0b0000000000000000000000000000000000000000000000000000000011111111
  show 0b0000000000000000000000000000000000000000000000000000000001111111
  show 0b0000000000000000000000000000000000000000000000000000000000111111
  show 0b0000000000000000000000000000000000000000000000000000000000011111
  show 0b0000000000000000000000000000000000000000000000000000000000001111
  show 0b0000000000000000000000000000000000000000000000000000000000000111
  show 0b0000000000000000000000000000000000000000000000000000000000000011
  show 0b0000000000000000000000000000000000000000000000000000000000000001
  show 0b0000000000000000000000000000000000000000000000000000000000000000
