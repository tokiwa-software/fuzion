ex_buffered_writer =>

  _ := stdout ! ()->
    x := array u8 1023 i->0x61
    y := array u8 2049 i->0x62
    z := array u8  128 i->0x63

    _ := stdout.env.write x
    _ := stdout.env.write y
    _ := stdout.env.write z
    _ := stdout.env.flush



write_provider : io.Write_Provider is
  redef write (b Sequence u8) outcome unit =>
    yak (String.from_bytes b)

stdout : io.buffered.writer write_provider 1024 is

_ := ex_buffered_writer
